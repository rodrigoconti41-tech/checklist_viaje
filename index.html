<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Move ‚Äî Migration Planner</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Cinzel:wght@400;600&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#f6f3ec; --surface:#fff; --text:#1f2937; --muted:#6b7280;
  --gold:#c6a24f; --red:#b13b3b; --blue:#2c3e73; --border:#e5e1d8;
  --radius:22px; --shadow:0 14px 34px rgba(0,0,0,0.08);
}
*{box-sizing:border-box;margin:0;padding:0;}
body{font-family:'Inter',sans-serif;background:linear-gradient(180deg,#f9f6ef,#f3efe6);padding:40px;}
.app{max-width:1200px;margin:auto;}

.branding{background:var(--surface);padding:32px;border-radius:36px;border:2px solid var(--gold);box-shadow:var(--shadow);margin-bottom:24px;text-align:center;}
.brand-title{font-family:'Cinzel',serif;font-size:2.2rem;color:var(--blue);}
.brand-sub{color:var(--muted);}

.countdown{color:var(--red);margin-top:6px;font-size:0.9rem;}

.view{display:none;}
.view.active{display:block;}

.config, .footer, .card{background:var(--surface);padding:24px;border-radius:var(--radius);border:1px solid var(--border);box-shadow:var(--shadow);margin-bottom:24px;}
.config h2{font-family:'Cinzel',serif;color:var(--red);margin-bottom:12px;}
.config-row{display:flex;gap:12px;margin-bottom:12px;flex-wrap:wrap;}
input,select{padding:6px 10px;border-radius:8px;border:1px solid var(--border);}

button{padding:10px 18px;border-radius:999px;border:none;background:var(--blue);color:white;font-weight:600;cursor:pointer;}

.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;}
@media(max-width:900px){.grid{grid-template-columns:1fr;}}

.card h2{font-family:'Cinzel',serif;color:var(--red);text-align:center;margin-bottom:12px;}
ul{list-style:none;}
li{display:flex;align-items:center;justify-content:space-between;padding:8px 0;border-bottom:1px solid var(--border);}
.item{flex:1;font-size:0.9rem;}

.link{font-size:0.7rem;padding:3px 8px;border-radius:999px;background:rgba(198,162,79,0.15);color:var(--blue);text-decoration:none;}

.progress-wrap{display:flex;align-items:center;gap:10px;}
.progress-container{flex:1;height:16px;background:#e5e1d8;border-radius:8px;overflow:hidden;position:relative;}
.progress-bar{height:100%;background:linear-gradient(90deg,var(--blue),var(--gold),var(--red));width:0%;transition:0.4s;}
.plane{position:absolute;top:-14px;transform:translateX(-50%);transition:0.4s;font-size:1.3rem;}
</style>
</head>
<body>

<div class="app">

<div class="branding">
  <div class="brand-title">MOVE</div>
  <div class="brand-sub">Tu mudanza, dise√±ada con calma.</div>
  <div class="countdown" id="countdown"></div>
</div>

<div id="configView" class="view active">
  <div class="config">
    <h2>Configuraci√≥n</h2>
    <div class="config-row">
      <label>Fecha del viaje <input type="datetime-local" id="dateInput"></label>
    </div>
    <div class="config-row">
      <label>Personas <input type="number" id="peopleCount" min="1" max="5" value="2"></label>
    </div>
    <div id="peopleConfig"></div>
    <button onclick="start()">Continuar</button>
  </div>
</div>

<div id="appView" class="view">
  <div class="grid" id="checklistGrid"></div>

  <div class="footer">
    <div class="progress-wrap">
      <span>üá¶üá∑</span>
      <div class="progress-container">
        <div class="progress-bar" id="bar"></div>
        <div class="plane" id="plane">‚úàÔ∏è</div>
      </div>
      <span>üá™üá∏</span>
    </div>
  </div>
</div>

</div>

<script>
const masterTasks = {
  eu: [
    ["Empadronamiento","https://www.boe.es"],
    ["Cuenta bancaria",""],
    ["Canje licencia","https://www.dgt.es"]
  ],
  noEu: [
    ["Solicitud visa","https://www.exteriores.gob.es"],
    ["NIE","https://sede.administracionespublicas.gob.es"],
    ["TIE","https://sede.administracionespublicas.gob.es"]
  ]
};

let people=[];

peopleCount.onchange=renderPeopleConfig;
dateInput.onchange=updateCountdown;

function renderPeopleConfig(){
  const n=+peopleCount.value;
  const c=document.getElementById("peopleConfig");
  c.innerHTML="";
  people=[];
  for(let i=0;i<n;i++){
    const row=document.createElement("div");
    row.className="config-row";
    row.innerHTML=`
      <input placeholder="Nombre" onchange="people[${i}]={...people[${i}],name:this.value}">
      <select onchange="people[${i}]={...people[${i}],eu:this.value==='yes'}">
        <option value="no">Sin ciudadan√≠a UE</option>
        <option value="yes">Con ciudadan√≠a UE</option>
      </select>`;
    c.appendChild(row);
  }
}
renderPeopleConfig();

function start(){
  configView.classList.remove("active");
  appView.classList.add("active");
  renderChecklist();
}

function renderChecklist(){
  checklistGrid.innerHTML="";
  people.forEach((p,i)=>{
    const card=document.createElement("div");
    card.className="card";
    card.innerHTML=`<h2>${p.name||"Persona "+(i+1)}</h2><ul></ul>`;
    const ul=card.querySelector("ul");
    const tasks = p.eu ? masterTasks.eu : masterTasks.noEu;
    tasks.forEach(([t,link])=>{
      const li=document.createElement("li");
      li.innerHTML=`<span class="item">${t}</span>
        <select onchange="updateProgress()"><option>Pendiente</option><option>Hecho</option></select>
        ${link?`<a class="link" href="${link}" target="_blank">Abrir gu√≠a</a>`:""}`;
      ul.appendChild(li);
    });
    checklistGrid.appendChild(card);
  });
  updateProgress();
}

function updateProgress(){
  let total=0,done=0;
  document.querySelectorAll("#checklistGrid select").forEach(s=>{
    total++;
    if(s.value==="Hecho") done++;
  });
  const percent=total?done/total*100:0;
  bar.style.width=percent+"%";
  plane.style.left=percent+"%";
}

function updateCountdown(){
  const target=new Date(dateInput.value);
  setInterval(()=>{
    const now=new Date();
    let diff=target-now;
    if(diff<0) diff=0;
    const s=Math.floor(diff/1000)%60;
    const m=Math.floor(diff/60000)%60;
    const h=Math.floor(diff/3600000)%24;
    const d=Math.floor(diff/86400000)%30;
    const mo=Math.floor(diff/2592000000);
    countdown.textContent=`${mo}m ${d}d ${h}h ${m}m ${s}s`;
  },1000);
}
</script>

</body>
</html>
